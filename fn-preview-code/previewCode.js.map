{
  "version": 3,
  "sources": [
    "previewCode.es6"
  ],
  "names": [],
  "mappings": "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",
  "file": "previewCode.js",
  "sourcesContent": [
    "/**\r\n * PreviewCode Plugin v3.0.3.180510_beta\r\n *\r\n * Setting in html tag:\r\n * 1. Required:\r\n * 1.1 data-toggle=\"previewCode\"\r\n *\r\n * 2. Optional:\r\n * 2.0 data-target=\"#[targetId]\" // default with not set, and it will be current element. or element querySelector, append preview code to target element)\r\n * 2.1 data-title=\"titleAboveCode\" // \"false\" will not show title\r\n * 2.2 data-position=\"append\"(default), \"prepend\", \"insertBefore\", \"insertAfter\"\r\n * 2.3 data-fetch=\"file\" //Available for <script>-src and <link>-href, fetch file content; (default not fetch file)\r\n * 2.4 data-src=\"url\" // set url to load script/style in current element\r\n * 2.5 data-collapse=\"on\" // set collapse on, default collapse off\r\n * 2.6 data-tag=\"show\" // show the wrapper tag, default not show (For data-fetch not set)\r\n *\r\n * Support: Any html tag, especially support <link> with href, <script> with src;\r\n *\r\n * Dependency:\r\n * 1. highlight, https://highlightjs.org/\r\n * 2. common.js, for loading resource file (https://gyx8899.github.io/YX-JS-ToolKit/assets/js/common.js)\r\n *  2.1 loadResources\r\n *  2.2 getFileNameFromURL\r\n *  2.3 deepExtend\r\n *  2.4 escapeHTML\r\n *  2.5 getFileContent\r\n *  2.6 addElement\r\n *  2.7 getElements\r\n *  2.8 addClass\r\n *  2.9 toggleClass\r\n * */\r\n(function (root, factory) {\r\n\tif (typeof define === 'function' && define.amd)\r\n\t{\r\n\t\tdefine(['yx'], factory);\r\n\t\t// define(['jquery', 'underscore'], factory);\r\n\t}\r\n\telse if (typeof module === 'object' && module.exports)\r\n\t{\r\n\t\tmodule.exports = factory(require('yx'));\r\n\t\t// module.exports = factory(require('jquery'), require('underscore'));\r\n\t}\r\n\telse\r\n\t{\r\n\t\troot.PreviewCode = factory(root.YX);\r\n\t\t// root.PreviewCode = factory(root.jQuery, root._);\r\n\t}\r\n}(window, function (YX) {\r\n\tlet pluginName = 'previewCode';\r\n\r\n\tlet PreviewCode = function (elements, options) {\r\n\t\tthis.options = YX.Util.tool.deepExtend({}, PreviewCode.DEFAULTS, options);\r\n\r\n\t\tlet that = this,\r\n\t\t\t\turls = [that.options.highlight.css, that.options.highlight.js].concat(that.options.highlight.others);\r\n\t\tYX.Util.load.loadResources(urls, function () {\r\n\t\t\tthat._init(elements);\r\n\t\t});\r\n\t};\r\n\r\n\tPreviewCode.DEFAULTS = {\r\n\t\thighlight: {\r\n\t\t\tcss: 'https://gyx8899.github.io/YX-WebThemeKit/fn-preview-code/previewCode.css',\r\n\t\t\tjs: 'https://gyx8899.github.io/YX-WebThemeKit/fn-preview-code/highlight.js',\r\n\t\t\tothers: []\r\n\t\t},\r\n\t\tinitHighlight: initHighlight\r\n\t};\r\n\r\n\tPreviewCode.prototype._init = function (elements) {\r\n\t\tthis.options.initHighlight();\r\n\t\tlet elementArray = YX.Util.element.getElements(elements || document.querySelectorAll('[data-toggle=\"previewCode\"]'));\r\n\t\telementArray.forEach(function (element) {\r\n\t\t\tif (element.getAttribute(\"data-\" + pluginName) !== pluginName)\r\n\t\t\t{\r\n\t\t\t\telement.setAttribute(\"data-\" + pluginName, pluginName);\r\n\t\t\t\tpreviewElementCode(element);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// Functions: init Highlight\r\n\tfunction initHighlight()\r\n\t{\r\n\t\thljs.configure({tabReplace: '  '});\r\n\t\t// hljs.initHighlightingOnLoad();\r\n\t}\r\n\r\n\tfunction highlightCode(codeElement)\r\n\t{\r\n\t\thljs.highlightBlock(codeElement.querySelector('pre code'));\r\n\t}\r\n\r\n\t// Functions: Process code\r\n\tfunction previewElementCode(element)\r\n\t{\r\n\t\tlet dataTargetValue = element.getAttribute('data-target'),\r\n\t\t\t\ttargetElement = !dataTargetValue ? element : document.querySelector(dataTargetValue),\r\n\t\t\t\tpreviewPosition = (!dataTargetValue && !element.getAttribute('data-position')) ? 'replace' : (element.getAttribute('data-position') || 'append'),\r\n\t\t\t\tpreviewFetch = element.getAttribute('data-fetch'),\r\n\t\t\t\tpreviewHTML = getPreviewElementHTML(element),\r\n\t\t\t\tpreviewTitle = getPreviewTitle(element),\r\n\t\t\t\telementTag = element.tagName.toLowerCase(),\r\n\t\t\t\telementLink = '';\r\n\t\tif (previewFetch === 'file')\r\n\t\t{\r\n\t\t\tif (elementTag === 'script')\r\n\t\t\t{\r\n\t\t\t\telementLink = element.src;\r\n\t\t\t}\r\n\t\t\telse if (elementTag === 'link')\r\n\t\t\t{\r\n\t\t\t\telementLink = element.href;\r\n\t\t\t}\r\n\t\t\telse if (element.getAttribute('data-src'))\r\n\t\t\t{\r\n\t\t\t\telementLink = element.getAttribute('data-src');\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ((elementTag === 'script' && element.src) || (elementTag === 'link' && element.href))\r\n\t\t\t{\r\n\t\t\t\tpreviewHTML = filterTagAttrData(element.outerHTML);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet positionInfo = {\r\n\t\t\tparentElement: targetElement,\r\n\t\t\tposition: previewPosition,\r\n\t\t\tisCollapsed: element.getAttribute('data-collapse') === 'on'\r\n\t\t};\r\n\t\tif (elementLink)\r\n\t\t{\r\n\t\t\tYX.Util.load.getFileContent(elementLink, function (data) {\r\n\t\t\t\taddPreviewCode(positionInfo, data, YX.Util.url.getFileNameFromURL(elementLink).baseName);\r\n\t\t\t}, null);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\taddPreviewCode(positionInfo, previewHTML, previewTitle);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addPreviewCode(positionInfo, codeString, demoTitle)\r\n\t{\r\n\t\tlet codeContent = trimPrevSpace(YX.Util.string.escapeHTML(codeString)),\r\n\t\t\t\tcodeElement = document.createElement('div'),\r\n\t\t\t\tpreviewTitle = demoTitle === '' ? '' :\r\n\t\t\t\t\t\t'<div class=\"preview-title\">' +\r\n\t\t\t\t\t\t'<span>' + demoTitle + '</span>' +\r\n\t\t\t\t\t\t'<img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiBAMAAADIaRbxAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAbUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJRR4iAAAAAIdFJOUwF5q/XXRBg3BwRgrQAAAGRJREFUKBVjYBiSoEQA7uwUBTBTohEmwuZhAGYydQhAhVKaAyAsDagiNg9TqBRMEVwJAwNEEUIJAwNEEZISiCJkJRBFKEpAilCVgBSJwNwCdQCDRgfMLTARJnQlDAziMLmhSAMAhrURVl4zt/IAAAAASUVORK5CYII=\">' +\r\n\t\t\t\t\t\t'</div>';\r\n\t\tcodeElement.className = \"preview-code\";\r\n\t\tcodeElement.innerHTML = previewTitle + '<pre><code>' + codeContent + '</code></pre>';\r\n\r\n\t\tif (positionInfo.isCollapsed)\r\n\t\t{\r\n\t\t\tYX.Util.element.addClass(codeElement, 'collapse');\r\n\t\t}\r\n\r\n\t\tlet previewCodeElement = YX.Util.element.addElement(positionInfo.parentElement, codeElement, positionInfo.position);\r\n\t\tdemoTitle !== '' && bindClickEvent(previewCodeElement, '.preview-title');\r\n\t\thighlightCode(previewCodeElement);\r\n\t}\r\n\r\n\tfunction filterTagAttrData(tagStr)\r\n\t{\r\n\t\tlet tagStrArray1 = tagStr.split('>');\r\n\t\tif (tagStrArray1.length < 2)\r\n\t\t{\r\n\t\t\treturn tagStr;\r\n\t\t}\r\n\t\tlet attrDataStr = tagStrArray1[0].split(' ').filter(function (t) {\r\n\t\t\treturn (t.indexOf('data-') === -1);\r\n\t\t}).join(' ');\r\n\r\n\t\treturn [attrDataStr].concat(tagStrArray1.slice(1)).join('>');\r\n\t}\r\n\r\n\tfunction getPreviewTitle(element)\r\n\t{\r\n\t\tlet previewTitle = element.getAttribute('data-title');\r\n\t\tif (previewTitle === 'false')\r\n\t\t{\r\n\t\t\tpreviewTitle = '';\r\n\t\t}\r\n\t\telse if (!previewTitle)\r\n\t\t{\r\n\t\t\tlet elementTag = element.tagName.toLowerCase();\r\n\t\t\tif (elementTag === 'style' || elementTag === 'link')\r\n\t\t\t{\r\n\t\t\t\tpreviewTitle = 'CSS';\r\n\t\t\t\tlet href = element.getAttribute('href');\r\n\t\t\t\tif (elementTag === 'link' && href !== null)\r\n\t\t\t\t{\r\n\t\t\t\t\tpreviewTitle = YX.Util.url.getFileNameFromURL(href).name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (elementTag === 'script')\r\n\t\t\t{\r\n\t\t\t\tpreviewTitle = 'JS';\r\n\t\t\t\tlet src = element.getAttribute('src');\r\n\t\t\t\tif (src !== null)\r\n\t\t\t\t{\r\n\t\t\t\t\tpreviewTitle = YX.Util.url.getFileNameFromURL(src).name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tpreviewTitle = 'HTML';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn previewTitle;\r\n\t}\r\n\r\n\tfunction getPreviewElementHTML(element)\r\n\t{\r\n\t\tlet previewCodeElement = element.cloneNode(true),\r\n\t\t\t\telementHTML = '';\r\n\r\n\t\tif (previewCodeElement.getAttribute('data-tag') === 'show')\r\n\t\t{\r\n\t\t\tdelete previewCodeElement.dataset['toggle'];\r\n\t\t\tdelete previewCodeElement.dataset['target'];\r\n\t\t\tdelete previewCodeElement.dataset['title'];\r\n\t\t\tdelete previewCodeElement.dataset['position'];\r\n\t\t\tdelete previewCodeElement.dataset['fetch'];\r\n\t\t\tdelete previewCodeElement.dataset['collapse'];\r\n\t\t\tdelete previewCodeElement.dataset['tag'];\r\n\t\t\telementHTML = previewCodeElement.outerHTML;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\telementHTML = previewCodeElement.innerHTML;\r\n\t\t}\r\n\t\treturn elementHTML;\r\n\t}\r\n\r\n\tfunction trimPrevSpace(str)\r\n\t{\r\n\t\tlet strArray = str.split('\\n'),\r\n\t\t\t\tbeginIndex = getFirstNonSpaceValueIndex(strArray),\r\n\t\t\t\tresultStr = '';\r\n\t\tif (beginIndex !== -1)\r\n\t\t{\r\n\t\t\tlet newStrArray = [],\r\n\t\t\t\t\treverseStrArray = strArray.slice(0).reverse(),\r\n\t\t\t\t\tendIndex = strArray.length - getFirstNonSpaceValueIndex(reverseStrArray),\r\n\t\t\t\t\tcommonPreSpace = /(^\\s*)/g.exec(strArray[beginIndex])[0];\r\n\t\t\tfor (let i = beginIndex, j = 0; i < endIndex; i++)\r\n\t\t\t{\r\n\t\t\t\tnewStrArray[j++] = strArray[i].replace(commonPreSpace, '');\r\n\t\t\t}\r\n\t\t\tresultStr = newStrArray.join('\\n');\r\n\t\t}\r\n\t\treturn resultStr;\r\n\t}\r\n\r\n\tfunction getFirstNonSpaceValueIndex(array)\r\n\t{\r\n\t\tfor (let i = 0, l = array.length; i < l; i++)\r\n\t\t{\r\n\t\t\t// Filter space line\r\n\t\t\tif (/^[\\s|\\t]+$/.test(array[i]) === false && array[i] !== '')\r\n\t\t\t{\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tfunction bindClickEvent(parentElement, selector)\r\n\t{\r\n\t\tparentElement.querySelector(selector).addEventListener('click', function () {\r\n\t\t\tYX.Util.element.toggleClass(parentElement, 'collapse');\r\n\t\t});\r\n\t}\r\n\r\n\treturn PreviewCode;\r\n}));\r\n\r\n/**\r\n * Auto init plugin if plugin.js?init=auto\r\n */\r\n(function () {\r\n\t/***\r\n\t * getUrlQueryParams\r\n\t * @param {string} url\r\n\t * @returns {object}\r\n\t */\r\n\tfunction getUrlQueryParams(url)\r\n\t{\r\n\t\tlet query = {},\r\n\t\t\t\tsearchStr = url ? (url.indexOf('?') !== -1 ? url.split('?')[1] : '') : window.location.search.substring(1),\r\n\t\t\t\tqueryParams = searchStr.split(\"&\");\r\n\t\tfor (let i = 0; i < queryParams.length; i++)\r\n\t\t{\r\n\t\t\tlet queryParam = queryParams[i].split(\"=\");\r\n\t\t\tif (queryParam.length > 1)\r\n\t\t\t{\r\n\t\t\t\tquery[queryParam[0]] = queryParam[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn query;\r\n\t}\r\n\r\n\t/**\r\n\t * getCurrentScriptSrc\r\n\t * @return {string}\r\n\t */\r\n\tfunction getCurrentScriptSrc()\r\n\t{\r\n\t\tvar scripts = document.getElementsByTagName(\"script\");\r\n\t\treturn (document.currentScript || scripts[scripts.length - 1]).src;\r\n\t}\r\n\r\n\tif (getUrlQueryParams(getCurrentScriptSrc())['init'] === 'auto')\r\n\t{\r\n\t\twindow.addEventListener('load', () => {return new PreviewCode();});\r\n\t}\r\n})();"
  ]
}